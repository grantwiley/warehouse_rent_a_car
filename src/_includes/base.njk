<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - Warehouse Rent A Car</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <style>
        /* Custom styling for Chekkit chat widget */
        /* Ensure the Chekkit widget has a high z-index but lower than call button */
        #chekkit-wrapper {
            z-index: 1500 !important; /* Call button is 1600 */
        }
        
        /* Desktop positioning - bottom right */
        @media (min-width: 769px) {
            #chekkit-wrapper {
                bottom: 20px !important;
                right: 20px !important;
            }
        }
        
        /* Mobile positioning - position on right side without overlapping */
        @media (max-width: 768px) {
            /* Adjust the fixed call button to move left */
            .call-button {
                left: 40% !important; /* Move left from center */
                transform: translateX(-60%) !important; /* Adjust transform to match */
                max-width: 250px !important; /* Make slightly narrower */
            }
            
            /* Position chat icon on the right side */
            #chekkit-wrapper {
                bottom: 16px !important; /* Same level as call button */
                right: 16px !important;
                transform: scale(0.85) !important; /* Make a bit smaller on mobile */
            }
            
            /* When chat is open, move it higher */
            #chekkit-wrapper.chekkit-open {
                bottom: 100px !important;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <a href="/" class="logo">
            <img src="/images/logo.png" alt="Warehouse Rent A Car Logo" width="200px">
        </a>
        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <nav>
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/quote">Get a Quote</a></li>
                <li><a href="https://www.cawcawcaw.com/inventory" target="_blank" rel="noopener">Buy A Car</a></li>
                <li><a href="/contact">Contact</a></li>
            </ul>
        </nav>
        <a href="tel:5402130202" class="call-button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;"><path d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"/></svg>540-213-0202</a>
    </div>

    {{ content | safe }}

    <div class="footer">
        <div class="footer-info">
            <div class="footer-left">
                <h3>Warehouse Rent A Car</h3>
                <p><a href="tel:5402130202" class="phone-link">540-213-0202</a></p>
                <p><a href="mailto:rental@cawcaw.com">rental@cawcaw.com</a></p>
                <p>537 Richmond Avenue, Staunton, VA 24401</p>
            </div>
            <div class="footer-right">
                <h3>Hours of Operation</h3>
                <div class="hours-container">
                    <div class="weekday-hours">
                        <p>Monday - Friday: 9:00 AM - 5:00 PM</p>
                        <p>Saturday: 10:00 AM - 2:00 PM</p>
                        <p>Sunday: Closed</p>
                    </div>
                </div>
            </div>
        </div>
        <p class="copyright">Copyright Â© 2025 Warehouse Rent A Car. <br>All Rights Reserved.</p>
    </div>

    <!-- Chekkit Chat Widget -->
    <script>
    var APP_ID = 'b6619c93e9f3aaa67ed61b965a9b63c0nG6nseBhzIxP6N+wva89GIPgrOuMKMyvdYCjH+VFhkU=';

    window.chekkitSettings = {
        app_id: APP_ID
    };
    </script>
    <script async defer>
    (function() {
        var d = document,
        h = d.getElementsByTagName('head')[0],
        s = d.createElement('script');

        s.type = 'text/javascript';
        s.async = true;
        s.src = 'https://webchat.chekkit.io/v1/webchat.js';
        h.appendChild(s);
        
        // Add a helper script to detect when chat is opened
        window.addEventListener('load', function() {
            setTimeout(function() {
                if (document.querySelector('#chekkit-wrapper')) {
                    var observer = new MutationObserver(function(mutations) {
                        mutations.forEach(function(mutation) {
                            if (mutation.attributeName === 'class') {
                                var element = mutation.target;
                                if (element.classList.contains('chekkit-open')) {
                                    element.classList.add('chekkit-open');
                                } else {
                                    element.classList.remove('chekkit-open');
                                }
                            }
                        });
                    });
                    
                    observer.observe(document.querySelector('#chekkit-wrapper'), { 
                        attributes: true 
                    });
                }
            }, 2000); // Wait for Chekkit to initialize
        });
    })();
    </script>

    <script src="/script.js"></script>
    <script src="/carousel.js"></script>
    <script src="/rates.js"></script>
</body>
</html>
